<!DOCTYPE html>


<!-- beautify ignore:start -->

<html
  xmlns:th="http://www.thymeleaf.org"
  lang="en"
  class="light-style layout-menu-fixed"
  dir="ltr"
  data-theme="theme-default"
  data-assets-path="/assets/admin/"
  data-template="vertical-menu-template-free"
>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0"
    />

    <title>Create User</title>

    <meta name="description" content="" />

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/assets/admin/img/favicon/favicon.ico" />

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Public+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&display=swap"
      rel="stylesheet"
    />

    <!-- Icons. Uncomment required icon fonts -->
    <link rel="stylesheet" href="/assets/admin/vendor/fonts/boxicons.css" />

    <!-- Core CSS -->
    <link rel="stylesheet" href="/assets/admin/vendor/css/core.css" class="template-customizer-core-css" />
    <link rel="stylesheet" href="/assets/admin/vendor/css/theme-default.css" class="template-customizer-theme-css" />
    <link rel="stylesheet" href="/assets/admin/css/demo.css" />

    <!-- Vendors CSS -->
    <link rel="stylesheet" href="/assets/admin/vendor/libs/perfect-scrollbar/perfect-scrollbar.css" />

    <link rel="stylesheet" href="/assets/admin/vendor/libs/apex-charts/apex-charts.css" />

    <!-- Page CSS -->

    <!-- Helpers -->
    <script src="/assets/admin/vendor/js/helpers.js"></script>

    <!--! Template customizer & Theme config files MUST be included after core stylesheets and helpers.js in the <head> section -->
    <!--? Config:  Mandatory theme config file contain global vars & default theme options, Set your preferred theme option in this file.  -->
    <script src="/assets/admin/js/config.js"></script>
  </head>

  <body>
    <!-- Layout wrapper -->
    <div class="layout-wrapper layout-content-navbar">
      <div class="layout-container">
        <!-- Menu -->

        <aside id="layout-menu" class="layout-menu menu-vertical menu bg-menu-theme">
          <div class="app-brand demo">
            <a href="/dashboard/admin" class="app-brand-link">
              <span class="app-brand-logo demo">
              <img src="assets/shop/images/vogue.jpg" alt="IMG-LOGO" width="100px">
              </span>

            </a>

            <a href="javascript:void(0);" class="layout-menu-toggle menu-link text-large ms-auto d-block d-xl-none">
              <i class="bx bx-chevron-left bx-sm align-middle"></i>
            </a>
          </div>

          <div class="menu-inner-shadow"></div>

          <ul class="menu-inner py-1">
            <!-- Dashboard -->
            <li class="menu-item ">
              <a href="/dashboard/admin" class="menu-link">
                <!-- <i class="menu-icon tf-icons bx bx-home-circle"></i> -->
                <div data-i18n="Analytics">Dashboard</div>
              </a>
            </li>

            <!-- users  -->
            <li class="menu-item ">
              <a href="/adminpanel" class="menu-link">
               <!--  <i class="menu-icon tf-icons bx bx-user"></i> -->
                <div data-i18n="Analytics">Users</div>
              </a>
            </li>


             <!-- Categories  -->
             <li class="menu-item">
              <a href="/category" class="menu-link">
               <!--  <i class="menu-icon tf-icons bx bx-category"></i> -->
                <div data-i18n="Analytics">Categories</div>
              </a>
            </li>

             <!-- Products  -->
             <li class="menu-item">
              <a href="/product" class="menu-link">
                <!-- <i class="menu-icon tf-icons bx bx-chip"></i> -->
                <div data-i18n="Analytics">Products</div>
              </a>
            </li>
            
            <!-- Order  -->
             <li class="menu-item active">
              <a href="/order" class="menu-link active">
                <!-- <i class="menu-icon tf-icons bx bx-chip"></i> -->
                <div data-i18n="Analytics">Order</div>
              </a>
            </li>
            
            <!-- Coupon  -->
             <li class="menu-item">
              <a href="/coupon" class="menu-link">
                <div data-i18n="Analytics">Coupon</div>
              </a>
            </li>
            
             <!-- Logout -->
             <li class="menu-item">
              <a href="/logout" class="menu-link">
                <!-- <i class="fa fa-sign-out"></i> -->
                <div data-i18n="Analytics">Logout</div>
              </a>
            </li>

            


          </ul>
        </aside>
        <!-- / Menu -->

		          <!-- Content wrapper -->
          <div class="content-wrapper">
            <!-- Content -->

            <div class="container-xxl flex-grow-1 container-p-y " style="padding-left: 18.625rem;">
              <div class="row">
                
                 <!-- DETAIL VIEW -->


                  <div class="card">

                      <legend>Order Details</legend>

                      <div class="container mt-1" id="mainContainer">

                          <div class="d-flex justify-content-end">
                             <!--  <a data-bs-toggle="tooltip" data-bs-offset="0,4" data-bs-placement="top" data-bs-html="true" title="" data-bs-original-title="<span>Regenerate and overwrite existing invoice</span>"  type="button" th:href="@{/order/generateInvoice?uuid={orderId}(orderId = ${order.uuid})}" class="btn btn-info m-1">Regenerate Invoice</a> -->
<!--                              calling rest from a th:value-->
<!--                               <button type="button" th:data-uuid="${order.uuid}" onclick="viewInvoice(this.getAttribute('data-uuid'))" class="btn btn-success m-1"  data-bs-toggle="tooltip" data-bs-offset="0,4" data-bs-placement="top" data-bs-html="true" title="" data-bs-original-title="<span>View existing Invoice. Generates new invoice if not found.</span>">View Invoice</button>
 -->
                              <!-- <a type="button" href="/order" class="btn btn-primary m-1">Back</a>
                              <button onclick="editOrder()" id="editBtn" type="button" class="btn btn-warning m-1">Edit</button>
                              <button  data-bs-toggle="modal" data-bs-target="#exampleModal" hidden id="deleteBtn" type="button" class="btn btn-danger m-1">Delete</button> -->



                          </div>

                          <form  th:action="@{/updateorder}" method="post">
                              <fieldset >

                          <!--         <span th:if="${paymentFailed}" class="my-2 badge rounded-pill bg-danger">Order Failed</span>
                                  <span th:if="${!paymentFailed}" class="my-2 badge rounded-pill bg-success">Order Successful</span>

                                  <span th:if="${order.deleted}" class="my-2 badge rounded-pill bg-danger">Deleted</span>
 -->


<!-- 
                                  <div class="mb-3"  id="idIn">
                                      <label  class="form-label">ID</label>

                                      <input th:value="${order.uuid}" name="uuid" type="text" class="form-control" placeHolder="Id">

                                  </div>
 --> 
 								<div class="mb-3"  id="idIn">
                                      <label  class="form-label">ID</label>
<!-- 
                                      <input th:value="${order.uuid}"  type="text" class="form-control" placeHolder="Id"> -->
                                       <input th:value="${order.uuid}" name="uuid" type="text" class="form-control" placeHolder="Id" readonly>

                                  </div>

 								

                                  <div class="mb-3">
                                      <label  class="form-label">Order Date</label>
                                      <input th:value="${order.createdAt}" type="text" id="date" class="form-control" placeHolder="Date" readonly="readonly">

                                  </div>

                                  <div class="row mb-3">
								    <div class="col-3" style="width:310px;">
								        <div class="card">
								            <div class="card-body">
								                <h5 class="card-title">User Information</h5>
								                <p class="card-text">
								                    <!-- <a th:href="@{/dashboard/users/{uuid}(uuid=${order.userInfo.uuid})}" class="my-2 badge bg-primary" data-bs-toggle="tooltip" data-bs-offset="0,4" data-bs-placement="right" data-bs-html="true" title="" data-bs-original-title="<span>Open User/Wallet Management</span>">View User Details</a><br> -->
								                    <!-- User ID: <span th:text="${order.userInfo.uuid}"></span><br> -->
								                    Name: <span th:text="${order.userInfo.firstName + ' ' + order.userInfo.lastName}"></span><br>
								                    username: <span th:text="${order.userInfo.username}"></span><br>
								                    Email: <span th:text="${order.userInfo.email}"></span><br>
								                    Phone: <span th:text="${order.userInfo.phone}"></span><br>
								                    <!-- <div th:if="${order.userInfo.createdAt != null}">
								                        User Since: <span th:text="${order.userInfo.createdAt}"></span><br>
								                    </div> -->
								                    <!-- Wallet Balance: <span th:text="${order.userInfo.wallet.balance}"></span><br> -->
								                </p>
								            </div>
								        </div>
								    </div>
								
								    <div class="col-3">
								        <div class="card mt-3 mt-md-0">
								            <div class="card-body">
								                <h5 class="card-title">Shipping Address</h5>
								                <p class="card-text">
								                    Flat: <span th:text="${order.userAddress.flat}"></span><br>
								                    Area: <span th:text="${order.userAddress.area}"></span><br>
								                    Town: <span th:text="${order.userAddress.town}"></span><br>
								                    City: <span th:text="${order.userAddress.city}"></span><br>
								                    State: <span th:text="${order.userAddress.state}"></span><br>
								                    PIN: <span th:text="${order.userAddress.pin}"></span><br>
								                    Landmark: <span th:text="${order.userAddress.landmark}"></span>
								                </p>
								            </div>
								        </div>
								    </div>
								    
								   <div class="col-5">
								        <div class="card mt-3 mt-md-0">
								            <div class="card-body">
								                <h5 class="card-title">Items</h5>
								                <table class="table" style="width:401px;">
    												<thead>
								                 	<tr>
            											<th>Name</th>
            											<th>Quantity</th>
            											<th>Price</th>
            											<th>Total</th>
        											</tr>
    													</thead>
    												<tbody >
        											<tr th:each="item : ${order.items}">
            										<td th:text="${item.getItemName()}"></td>
            										<td style="text-align:center;" th:text="${item.quantity}"></td>
           											<td th:text="${item.orderPrice}"></td>
            										<td th:text="${item.getTotal()}"></td>
        										</tr>
        										  </tbody>
												</table>
								            </div>
								        </div>
								    </div> 
								</div>

 
									
                                  <div class="form-group mb-3"  >
                                      <label for="orderStatus">Status:</label>
                                      <select class="form-control editable-field" id="orderStatus" name="orderStatus">
                                          <option th:each="status : ${statusList}"
                                                  th:value="${status}"
                                                  th:text="${status}"
                                                  th:selected="${order.orderStatus == status}">
                                          </option>
                                      </select>
                                  </div>

                                 <!--  <div th:if="${online}"> 
                                       <div th:if="${order.onlineOrderRef.razorPayOrderId != null}" class="mb-3">
                                          <label  class="form-label">RazorPay Order ID</label>
                                          <input th:value="${order.onlineOrderRef.razorPayOrderId}"  type="text" id="razOrderId" class="form-control" placeHolder="" readonly="readonly">

                                      </div>

                                      <div th:if="${order.onlineOrderRef.paymentId != null}" class="mb-3">
                                          <label  class="form-label">RazorPay Payment ID</label>
                                          <input th:value="${order.onlineOrderRef.paymentId}"  type="text" id="razPayId" class="form-control" placeHolder="" readonly="readonly">

                                      </div>

                                      <div th:if="${order.onlineOrderRef.signature != null}" class="mb-3">
                                          <label  class="form-label">RazorPay Signature</label>
                                          <input th:value="${order.onlineOrderRef.signature}"  type="text" id="razSign" class="form-control" placeHolder="" readonly="readonly">

                                      </div>



                                      <div th:if="${order.onlineOrderRef.errorDesc != null}" class="mb-3">
                                          <label  class="form-label">RazorPay Error Description</label>
                                          <input th:value="${order.onlineOrderRef.errorDesc}"  type="text" id="razErrDesc" class="form-control" placeHolder="" readonly="readonly">

                                      </div>

                                      <div th:if="${order.onlineOrderRef.errorPaymentId != null}" class="mb-3">
                                          <label  class="form-label">RazorPay Error Payment ID</label>
                                          <input th:value="${order.onlineOrderRef.errorPaymentId}"  type="text" id="razErrId" class="form-control" placeHolder="" readonly="readonly">

                                      </div>
                                  </div>


                                  <div th:if="${order.coupon != null}" class="mb-3">
                                      <label  class="form-label">Coupon Applied</label>
                                      <input th:value="${order.coupon.code}"  type="text" id="coupon" class="form-control" placeHolder="" readonly="readonly">

                                  </div>  -->
										
                                   <div class="mb-3">
                                      <label  class="form-label">MRP:</label>
                                      <input th:value="${order.total}"  type="text" id="total" class="form-control" placeHolder="" readonly="readonly">

                                  </div>
                                  <div class="mb-3">
                                      <label  class="form-label">Tax:</label>
                                      <input th:value="${order.tax}"  type="text" id="tax" class="form-control" placeHolder="" readonly="readonly">

                                  </div>
<!--                                   <div th:if="${order.offPrice != null}" class="mb-3">
                                      <label  class="form-label">Off Price:</label>
                                      <input th:value="${order.offPrice}"  type="text" id="offPrice" class="form-control" placeHolder="" readonly="readonly">

                                  </div> -->
                                  <div class="mb-3">
                                      <label  class="form-label">Total:</label>
                                      <input th:value="${#numbers.formatDecimal(order.getGross(), 0, 1)}"  type="text" id="grossOff" class="form-control" placeHolder="" readonly="readonly">

                                  </div>


                                  <div class="mb-3">
                                      <label  class="form-label">Shipping Method:</label>
                                      <input th:value="${order.orderType}"  type="text" id="orderType " class="form-control" placeHolder="" readonly="readonly">

                                  </div> 

                                  <div class="mb-3" id="passSection" hidden>

                                  </div>

                                      <div class="mb-3"  id="saveBtn" >
                                      <button   type="submit" class="btn btn-success m-1">Save</button>
                                      <a type="button" href="/order" class="btn btn-primary m-1">Back</a>


                                  </div>
                              </fieldset>
                          </form>

                      </div>




                      <!-- Modal -->
                      <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                          <div class="modal-dialog">

                              <div class="modal-content">
                                  <div class="modal-header">
                                      <h5 class="modal-title" id="exampleModalLabel">Confirm</h5>
                                      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                  </div>
                                  <form  th:action="@{/delete}" th:object="${order}"  method="post">
                                      <div class="modal-body">
                                          <p>Are you sure that you want to delete the order?</p>
                                          <p name="ordernameModal" th:text="${name}"></p>
                                          <input hidden th:value="${uuid}" name="uuid" type="text" class="form-control" placeHolder="Id">

                                      </div>
                                      <div class="modal-footer">

                                          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                                          <button  type="submit" value="OrderInfo"  class="btn btn-danger">Delete</button>

                                      </div>
                                  </form>
                              </div>

                          </div>
                      </div>






                  </div>


                  </div>
                </div>
               
                
                  
               </div>
                
                
         
            </div>
	






            <!-- Footer -->
            <footer class="content-footer footer bg-footer-theme">
             
            </footer>
            <!-- / Footer -->

            <div class="content-backdrop fade"></div>
          </div>
          <!-- Content wrapper -->
        </div>
        <!-- / Layout page -->
      </div>

      <!-- Overlay -->
      <div class="layout-overlay layout-menu-toggle"></div>
    </div>
    <!-- / Layout wrapper -->



    <!-- Core JS -->
    <!-- build:js assets/vendor/js/core.js -->
    <script src="/assets/admin/vendor/libs/jquery/jquery.js"></script>
    <script src="/assets/admin/vendor/libs/popper/popper.js"></script>
    <script src="/assets/admin/vendor/js/bootstrap.js"></script>
    <script src="/assets/admin/vendor/libs/perfect-scrollbar/perfect-scrollbar.js"></script>

    <script src="/assets/admin/vendor/js/menu.js"></script>
    <!-- endbuild -->

    <!-- Vendors JS -->
    <script src="/assets/admin/vendor/libs/apex-charts/apexcharts.js"></script>

    <!-- Main JS -->
    <script src="/assets/admin/js/main.js"></script>

    <!-- Page JS -->
    <script src="/assets/admin/js/dashboards-analytics.js"></script>

    <!-- Place this tag in your head or just before your close body tag. -->
    <script async defer src="https://buttons.github.io/buttons.js"></script>

 <!--    <script>
    function editOrder() {
        document.getElementById('orderFieldset').removeAttribute('disabled');
        document.getElementById('saveBtn').removeAttribute('hidden');
        document.getElementById('cancel-btn').removeAttribute('hidden');
        document.getElementById('editBtn').setAttribute('hidden', true);
        document.getElementById('deleteBtn').setAttribute('hidden', true);
    }

  // Example starter JavaScript for disabling form submissions if there are invalid fields
(function () {
  'use strict'

  // Fetch all the forms we want to apply custom Bootstrap validation styles to
  var forms = document.querySelectorAll('.needs-validation')

  // Loop over them and prevent submission
  Array.prototype.slice.call(forms)
    .forEach(function (form) {
      form.addEventListener('submit', function (event) {
        if (!form.checkValidity()) {
          event.preventDefault()
          event.stopPropagation()
        }

        form.classList.add('was-validated')
      }, false)
    })
})()



$(document).ready(function(){
	// Activate tooltips
	$('[data-toggle="tooltip"]').tooltip();

	// Filter table rows based on searched term
    $("#search").on("keyup", function() {
        var term = $(this).val().toLowerCase();
        $("table tbody tr").each(function(){
            $row = $(this);
            var name = $row.find("td:nth-child(6)").text().toLowerCase();
            console.log(name);
            if(name.search(term) < 0){
                $row.hide();
            } else{
                $row.show();
            }
        });
    });
});


//function for del click
$(document).ready(function() {
  $('.delete').on('click', function() {
    var orderId = $(this).closest('tr').find('td:first-child').text();
    $('#deleteOrderButton').attr('href', '/app/order/delete/' + orderId);
  });
});

//function for modal
  $(document).ready(function() {
    $('#confirmDeleteModal').on('show.bs.modal', function(event) {
      var button = $(event.relatedTarget);
      var orderId = button.data('order-id');
      var confirmDeleteButton = $(this).find('#confirmDeleteButton');
      confirmDeleteButton.attr('href', '/app/order/delete/' + orderId);
    });
  });

  //data confirm
$(document).on("click", ".delete-link", function(e) {
    e.preventDefault();
    var deleteUrl = $(this).attr("href");
    $("#delete-confirm-modal").modal("show");
    $("#delete-confirm-modal").on("click", "#delete-confirm-btn", function() {
        window.location.href = deleteUrl;
    });
});

//PAGINATION
  /*<![CDATA[*/
  function sortTable(field) {
    var sort = document.getElementById("sortOrder").value;
    var searchBox = document.getElementById("searchBox").value;
    var filterValue = document.getElementById("filterValue").value;

    if (sort === "ASC" || sort === "") {
      sort = "DESC";
    } else {
      sort = "ASC";
    }

    var currentPage = /*[[${currentPage}]]*/ 0;
    var pageSize = /*[[${pageSize}]]*/ 15;

    window.location.href = "/order?page=" + currentPage + "&size=" + pageSize + "&field=" + field + "&sort=" + sort + "&keyword=" + searchBox + "&filter=" + filterValue;

  }
  /*]]>*/

function searchOrder(){
    var searchBox = document.getElementById("searchBox").value;
   if(searchBox == ""){
      window.location.href = "/order";
    }else{
      window.location.href = "/order?keyword=" + searchBox;
    }
}

function filterOrder(filter){
   window.location.href = "/order?filter=" + filter;
}
function resetList(){
   window.location.href = "/order";
}



</script>
 -->


  </body>
</html>
